(()=>{"use strict";var e={273:(e,n,t)=>{t.d(n,{R:()=>S});let s=document.getElementById("spinner");const c=new class{handleClear(){s.innerHTML=""}render(){s.innerHTML='\n        \t<div class="spinner-container">\n        \t\t<img class="spinner__img" src="../components/Spinner/img/spinner.svg" />\n        \t</div>\n        '}},i=new class{constructor(){this.keyName="products"}getProducts(){const e=localStorage.getItem(this.keyName);return null!==e?JSON.parse(e):[]}putProducts(e){let n=this.getProducts(),t=!1;const s=n.indexOf(e);return-1===s?(n.push(e),t=!0):n.splice(s,1),localStorage.setItem(this.keyName,JSON.stringify(n)),{pushProduct:t,products:n}}},l=document.getElementById("shopping"),r=new class{handlerClear(){l.innerHTML=""}render(){const e=i.getProducts();let n="",t=0;S().forEach((({id:s,name:c,price:i})=>{-1!==e.indexOf(s)&&(n+=`\n                    <tr>\n                        <td class="shopping-element__name">‚ö°Ô∏è ${c}</td>\n                        <td class="shopping-element__price">${i.toLocaleString()} USD</td>\n                    </tr>\n                `,t+=i)}));const s=`\n            <div class="shopping-container">\n                <div id="shopping__close" class="shopping__close" onclick=""></div>\n                <table>\n                    ${n}\n                    <tr>\n                        <td class="shopping-element__name">üí• –°—É–º–∞ –≤—Å—ñ—Ö —Ç–æ–≤–∞—Ä—ñ–≤:</td>\n                        <td class="shopping-element__price">${t.toLocaleString()} USD</td>\n                    </tr>\n                </table>\n            </div>\n        `;l.innerHTML=s}},a=document.getElementById("header"),o=new class{handlerOpenShoppingPage(){r.render()}render(e){a.innerHTML="";const n=`\n            <div class="header-container">\n                <div id="open_shopping" class="header-counter" onclick="">\n                üõí ${e}\n                </div>\n            </div>\n        <div class="check-box">\n            <div class="check-item">\n            <input type="checkbox" class="check" value="all" id="all" name="all" checked>\n            <label for="all">–í—Å—ñ</label>\n            </div>\n            <div class="check-item">\n                <input type="checkbox" class="check" value="m" id="m" name="m">\n                <label for="m">–ß–æ–ª–æ–≤—ñ—á—ñ</label>\n            </div>\n            <div class="check-item">\n            <input type="checkbox" class="check" value="f" id="f" name="f">\n            <label for="f">–ñ—ñ–Ω–æ—á—ñ</label>\n            </div>\n        </div>\n        `;a.innerHTML=n}},d=document.getElementById("products"),p=new class{constructor(){this.classNameActive="products-element__btn_active",this.labelAdd="–î–æ–±–∞–≤–∏—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É",this.labelRemove="–í–∏–¥–∞–ª–∏—Ç–∏ –∑ –∫–æ—Ä–∑–∏–Ω–∏"}handlerSetLocatStorage(e,n){const{pushProduct:t,products:s}=i.putProducts(n);t?(e.classList.add(this.classNameActive),e.innerText=this.labelRemove):(e.classList.remove(this.classNameActive),e.innerText=this.labelAdd),o.render(s.length)}render(){let e=S();const n=i.getProducts();let t="";e.forEach((({id:e,name:s,price:c,img:i})=>{let l="",r="";-1===n.indexOf(e)?r=this.labelAdd:(l=" "+this.classNameActive,r=this.labelRemove),t+=`\n                    <li class="products-element">\n                        <span class="products-element__name">${s}</span>\n                        <img class="products-element__img" src="${i}" />\n                        <span class="products-element__price">\n                            ‚ö°Ô∏è ${c.toLocaleString()} USD\n                        </span>\n                        <button value="${e}" id="add_prod" class="products-element__btn${l}" onclick="">\n                            ${r}\n                        </button>\n                        <button value="${e}" id="show_des" class="description-element__btn" onclick=""> –û–ø–∏—Å </button>\n                    </li>\n                `}));const s=`\n            <ul class="products-container">\n                ${t}\n            </ul>\n        `;function c(){let n=document.querySelector('.check[value="m"]'),t=document.querySelector('.check[value="f"]'),s="";const c=i.getProducts();n.checked&&!t.checked?(s="",e.forEach((({id:e,name:n,price:t,img:i,gender:l})=>{let r="",a="";-1===c.indexOf(e)?a=this.labelAdd:(r=" "+this.classNameActive,a=this.labelRemove),"m"===l&&(s+=`\n                    <li class="products-element">\n                        <span class="products-element__name">${n}</span>\n                        <img class="products-element__img" src="${i}" />\n                        <span class="products-element__price">\n                            ‚ö°Ô∏è ${t.toLocaleString()} USD\n                        </span>\n                        <button value="${e}" id="add_prod" class="products-element__btn${r}" onclick="">\n                            –î–æ–¥–∞—Ç–∏/–í–∏–¥–∞–ª–∏—Ç–∏\n                        </button>\n                        <button value="${e}" id="show_des" class="description-element__btn" onclick=""> –û–ø–∏—Å </button>\n                    </li>\n                `)}))):t.checked&&!n.checked?(s="",e.forEach((({id:e,name:n,price:t,img:i,gender:l})=>{let r="",a="";-1===c.indexOf(e)?this.labelAdd:r=" "+this.classNameActive,"f"===l&&(s+=`\n                <li class="products-element">\n                    <span class="products-element__name">${n}</span>\n                    <img class="products-element__img" src="${i}" />\n                    <span class="products-element__price">\n                        ‚ö°Ô∏è ${t.toLocaleString()} USD\n                    </span>\n                    <button value="${e}" id="add_prod" class="products-element__btn${r}" onclick="">\n                        –î–æ–¥–∞—Ç–∏/–í–∏–¥–∞–ª–∏—Ç–∏\n                    </button>\n                    <button value="${e}" id="show_des" class="description-element__btn" onclick=""> –û–ø–∏—Å </button>\n                </li>\n            `)}))):(s="",e.forEach((({id:e,name:n,price:t,img:i})=>{let l="",r="";-1===c.indexOf(e)?this.labelAdd:l=" "+this.classNameActive,s+=`\n            <li class="products-element">\n                <span class="products-element__name">${n}</span>\n                <img class="products-element__img" src="${i}" />\n                <span class="products-element__price">\n                    ‚ö°Ô∏è ${t.toLocaleString()} USD\n                </span>\n                <button class="products-element__btn${l}" onclick="">\n                    –î–æ–¥–∞—Ç–∏/–í–∏–¥–∞–ª–∏—Ç–∏\n                </button>\n                <button value="${e}" id="show_des" class="description-element__btn" onclick=""> –û–ø–∏—Å </button>\n            </li>\n        `})));const l=`\n        <ul class="products-container">\n            ${s}\n        </ul>\n        `;d.innerHTML=l}d.innerHTML=s,document.querySelectorAll(".check").forEach((e=>{e.onclick=c}))}},m=document.getElementById("footer"),u=new class{render(){m.innerHTML='\n        <div class="footer">\n          <div class="footer__row">\n            <div class="footer__text">üìû: +390560230120 ,\n            Stay Home üè†\n            </div>\n          </div>\n         </div>\n        '}},h=document.getElementById("menu"),g=new class{render(){h.innerHTML='\n        <div class="dws-menu">\n         <ul>\n           <li route="/watchShop/index"><a href="index"><i></i>–ì–æ–ª–æ–≤–Ω–∞</a></li>\n           <li route="/watchShop/share"><a href="share"><i></i>–ê–∫—Ü—ñ—ó</a></li>\n           <li route="/watchShop/cart"><a href="cart"><i></i>–ö–æ—Ä–∑–∏–Ω–∞</a></li>\n           <li route="/watchShop/order"><a href="order"><i></i>–ó—Ä–æ–±–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</a></li>\n         </ul> \n      </div>\n        '}},_=document.getElementById("slider"),v=new class{render(){!function t(){e=setTimeout((function(){var s=document.getElementById("row");(n-=128)<-512&&(n=0,clearTimeout(e)),s.style.left=n+"px",t()}),3e3)}();var e,n=0;_.innerHTML='\n      <div id="row">\n\t\t\t<img src="img/1.jpg" alt ="">\n\t\t\t<img src="img/2.jpg" alt ="">\n\t\t\t<img src="img/3.jpg" alt ="">\n\t\t\t<img src="img/4.jpg" alt ="">\n\t\t\t<img src="img/5.jpg" alt ="">\n      <img src="img/6.jpg" alt ="">\n      </div>\n\n      '}},b=new class{render(){ROOT_ERROR.innerHTML='\n        \t<div class="error-container">\n                <div class="error-message">\n                    <h3>–®–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫</h3>\n                    <p>–ü–æ—Ö–æ–¥—É –Ω–µ —Ç–∞ —Å—Å–∏–ª–∫–∞ –∞–±–æ –∑–Ω–æ–≤ –∑–∞–±—É–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä</p>\n                </div>\n        \t</div>\n        '}},f=document.getElementById("description"),k=new class{handlerClear(){f.innerHTML=""}handlerOpenDescriptionPage(e,n){k.render(n)}render(e){let n=S(),t="",s=e;n.forEach((({id:e,name:n,price:c,img:i,description:l,gender:r})=>{e==s&&(t+=`\n                <span class="description-element__name">${n}</span>\n                <img class="description-element__img" src="${i}" />\n                <span class="description-element__price">\n                    ‚ö°Ô∏è ${c.toLocaleString()} USD\n                </span>\n                <p class="description-element__text">${l}</p>\n                <p class="description-element__gender">–°—Ç–∞—Ç—å: ${r}</p>\n                `)}));const c=`\n            <div class="description-container">\n                <div id="description__close" class="description__close" onclick=""></div>\n                <table>\n                    ${t}\n                </table>\n            </div>\n        `;f.innerHTML=c}};c.render();let $=[];fetch("server/db.json").then((e=>e.json())).then((e=>{$=e,setTimeout((()=>{c.handleClear(),function(){!function(){console.log("DOM has loaded"),Array.from(document.querySelectorAll("[route]"));var e=new function(e,n){return{name:"myFirstRouter",routes:[{path:"/index",name:"Main"},{path:"/cart",name:"CART"},{path:"/share",name:"SHARE"},{path:"/order",name:"ORDER"}]}}(0,0),n=window.location.pathname;if(""===n||"/index"===n)console.log("You are on the Main page");else{var t=e.routes.filter((function(e){return e.path===n}))[0];t.name&&console.log("You are on the "+t.name+" path")}}();let e=i.getProducts();o.render(e.length),p.render(),u.render(),g.render(),v.render()}()}),1e3)})).catch((()=>{c.handleClear(),b.render()}));const S=()=>$;document.addEventListener("click",(e=>{document.getElementById("open_shopping").addEventListener("click",(function(){o.handlerOpenShoppingPage(),document.getElementById("shopping__close").addEventListener("click",(function(){r.handlerClear()}))})),S().forEach((({id:n})=>{n===e.target.value&&("add_prod"===e.target.id?p.handlerSetLocatStorage(void 0,n):"show_des"===e.target.id&&(k.handlerOpenDescriptionPage(void 0,n),document.getElementById("description__close").addEventListener("click",(function(){f.innerHTML=""}))))}))}))}},n={};function t(s){if(n[s])return n[s].exports;var c=n[s]={exports:{}};return e[s](c,c.exports,t),c.exports}t.d=(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t(273)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcmMvLi9jb21wb25lbnRzL1NwaW5uZXIvU3Bpbm5lci5qcyIsIndlYnBhY2s6Ly9zcmMvLi91dGlscy9sb2NhbFN0b3JhZ2VVdGlsLmpzIiwid2VicGFjazovL3NyYy8uL2NvbXBvbmVudHMvU2hvcHBpbmcvU2hvcHBpbmcuanMiLCJ3ZWJwYWNrOi8vc3JjLy4vY29tcG9uZW50cy9IZWFkZXIvSGVhZGVyLmpzIiwid2VicGFjazovL3NyYy8uL2NvbXBvbmVudHMvUHJvZHVjdHMvUHJvZHVjdHMuanMiLCJ3ZWJwYWNrOi8vc3JjLy4vY29tcG9uZW50cy9Gb290ZXIvRm9vdGVyLmpzIiwid2VicGFjazovL3NyYy8uL2NvbXBvbmVudHMvTWVudS9NZW51LmpzIiwid2VicGFjazovL3NyYy8uL2NvbXBvbmVudHMvU2xpZGVyL1NsaWRlci5qcyIsIndlYnBhY2s6Ly9zcmMvLi9jb21wb25lbnRzL0Vycm9yL0Vycm9yLmpzIiwid2VicGFjazovL3NyYy8uL2NvbXBvbmVudHMvRGVzY3JpcHRpb24vRGVzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vc3JjLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vc3JjLy4vcm91dGVyLmpzIiwid2VicGFjazovL3NyYy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zcmMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3NyYy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NyYy93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsiUk9PVF9TUElOTkVSIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNwaW5uZXJQYWdlIiwiaW5uZXJIVE1MIiwibG9jYWxTdG9yYWdlVXRpbCIsInRoaXMiLCJrZXlOYW1lIiwicHJvZHVjdHNMb2NhbFN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiaWQiLCJwcm9kdWN0cyIsImdldFByb2R1Y3RzIiwicHVzaFByb2R1Y3QiLCJpbmRleCIsImluZGV4T2YiLCJwdXNoIiwic3BsaWNlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsIlJPT1RfU0hPUFBJTkciLCJzaG9wcGluZ1BhZ2UiLCJwcm9kdWN0c1N0b3JlIiwiaHRtbENhdGFsb2ciLCJzdW1DYXRhbG9nIiwiZ2V0Q2F0YWxvZyIsImZvckVhY2giLCJuYW1lIiwicHJpY2UiLCJ0b0xvY2FsZVN0cmluZyIsImh0bWwiLCJST09UX0hFQURFUiIsImhlYWRlclBhZ2UiLCJyZW5kZXIiLCJjb3VudCIsIlJPT1RfUFJPRFVDVFMiLCJwcm9kdWN0c1BhZ2UiLCJjbGFzc05hbWVBY3RpdmUiLCJsYWJlbEFkZCIsImxhYmVsUmVtb3ZlIiwiZWxlbWVudCIsInB1dFByb2R1Y3RzIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJUZXh0IiwicmVtb3ZlIiwibGVuZ3RoIiwiQ0FUQUxPRyIsImltZyIsImFjdGl2ZUNsYXNzIiwiYWN0aXZlVGV4dCIsIm9yZGVyRnVuY3Rpb24iLCJtIiwicXVlcnlTZWxlY3RvciIsImYiLCJjaGVja2VkIiwiZ2VuZGVyIiwicXVlcnlTZWxlY3RvckFsbCIsIm9uY2xpY2siLCJST09UX0ZPT1RFUiIsImZvb3RlckRvd24iLCJST09UX01FTlUiLCJuYXZpZ2F0aW9uTWVudSIsIlJPT1RfU0xJREVSIiwiYXV0b1NsaWRlciIsInRpbWVyIiwic2V0VGltZW91dCIsInJvdyIsImxlZnQiLCJjbGVhclRpbWVvdXQiLCJzdHlsZSIsImVycm9yUGFnZSIsIlJPT1RfRVJST1IiLCJST09UX0RFU0NSSVBUSU9OIiwiZGVzY3JpcHRpb25QYWdlIiwiZWwiLCJkZXNjcmlwdGlvbiIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJib2R5IiwiaGFuZGxlQ2xlYXIiLCJjb25zb2xlIiwibG9nIiwiQXJyYXkiLCJmcm9tIiwibXlGaXJzdFJvdXRlciIsInJvdXRlcyIsInBhdGgiLCJjdXJyZW50UGF0aCIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJyb3V0ZSIsImZpbHRlciIsInIiLCJyb3V0IiwiY2F0Y2giLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiaGFuZGxlck9wZW5TaG9wcGluZ1BhZ2UiLCJoYW5kbGVyQ2xlYXIiLCJ0YXJnZXQiLCJ2YWx1ZSIsImhhbmRsZXJTZXRMb2NhdFN0b3JhZ2UiLCJoYW5kbGVyT3BlbkRlc2NyaXB0aW9uUGFnZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJtYXBwaW5ncyI6InlEQUFBLElBQUlBLEVBQWVDLFNBQVNDLGVBQWUsV0FpQnBDLE1BQU1DLEVBQWMsSUFoQjNCLE1BQ0ksY0FDSUgsRUFBYUksVUFBWSxHQUc3QixTQU9JSixFQUFhSSxVQU5BLCtKQ3NCUkMsRUFBbUIsSUE3QmhDLE1BQ0ksY0FDSUMsS0FBS0MsUUFBVSxXQUVuQixjQUNJLE1BQU1DLEVBQXVCQyxhQUFhQyxRQUFRSixLQUFLQyxTQUN2RCxPQUE2QixPQUF6QkMsRUFDT0csS0FBS0MsTUFBTUosR0FFZixHQUVYLFlBQVlLLEdBQ1IsSUFBSUMsRUFBV1IsS0FBS1MsY0FDaEJDLEdBQWMsRUFDbEIsTUFBTUMsRUFBUUgsRUFBU0ksUUFBUUwsR0FXL0IsT0FUZSxJQUFYSSxHQUNBSCxFQUFTSyxLQUFLTixHQUNkRyxHQUFjLEdBRWRGLEVBQVNNLE9BQU9ILEVBQU8sR0FHM0JSLGFBQWFZLFFBQVFmLEtBQUtDLFFBQVNJLEtBQUtXLFVBQVVSLElBRTNDLENBQUVFLGNBQWFGLGNDekJ4QlMsRUFBZ0J0QixT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Q29udGVudCI6WyJsZXQgUk9PVF9TUElOTkVSID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwaW5uZXInKTtcbmNsYXNzIFNwaW5uZXIge1xuICAgIGhhbmRsZUNsZWFyKCkge1xuICAgICAgICBST09UX1NQSU5ORVIuaW5uZXJIVE1MID0gJyc7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBodG1sID0gYFxuICAgICAgICBcdDxkaXYgY2xhc3M9XCJzcGlubmVyLWNvbnRhaW5lclwiPlxuICAgICAgICBcdFx0PGltZyBjbGFzcz1cInNwaW5uZXJfX2ltZ1wiIHNyYz1cImNvbXBvbmVudHMvU3Bpbm5lci9pbWcvc3Bpbm5lci5zdmdcIiAvPlxuICAgICAgICBcdDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIFJPT1RfU1BJTk5FUi5pbm5lckhUTUwgPSBodG1sO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNwaW5uZXJQYWdlID0gbmV3IFNwaW5uZXIoKTtcblxuXG5cblxuIiwiY2xhc3MgTG9jYWxTdG9yYWdlVXRpbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2V5TmFtZSA9ICdwcm9kdWN0cyc7XG4gICAgfVxuICAgIGdldFByb2R1Y3RzKCkge1xuICAgICAgICBjb25zdCBwcm9kdWN0c0xvY2FsU3RvcmFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5TmFtZSk7XG4gICAgICAgIGlmIChwcm9kdWN0c0xvY2FsU3RvcmFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UocHJvZHVjdHNMb2NhbFN0b3JhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcHV0UHJvZHVjdHMoaWQpIHtcbiAgICAgICAgbGV0IHByb2R1Y3RzID0gdGhpcy5nZXRQcm9kdWN0cygpO1xuICAgICAgICBsZXQgcHVzaFByb2R1Y3QgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwcm9kdWN0cy5pbmRleE9mKGlkKTtcblxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBwcm9kdWN0cy5wdXNoKGlkKTtcbiAgICAgICAgICAgIHB1c2hQcm9kdWN0ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2R1Y3RzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmtleU5hbWUsIEpTT04uc3RyaW5naWZ5KHByb2R1Y3RzKSk7XG5cbiAgICAgICAgcmV0dXJuIHsgcHVzaFByb2R1Y3QsIHByb2R1Y3RzIH07XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGxvY2FsU3RvcmFnZVV0aWwgPSBuZXcgTG9jYWxTdG9yYWdlVXRpbCgpO1xuIiwiY29uc3QgUk9PVF9TSE9QUElORyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG9wcGluZycpO1xuaW1wb3J0IHtsb2NhbFN0b3JhZ2VVdGlsfSBmcm9tICcuLi8uLi91dGlscy9sb2NhbFN0b3JhZ2VVdGlsLmpzJ1xuaW1wb3J0IHtnZXRDYXRhbG9nfSBmcm9tICcuLi8uLi9pbmRleC5qcyc7XG5jbGFzcyBTaG9wcGluZyB7XG4gICAgaGFuZGxlckNsZWFyKCkge1xuICAgICAgICBST09UX1NIT1BQSU5HLmlubmVySFRNTCA9ICcnO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgcHJvZHVjdHNTdG9yZSA9IGxvY2FsU3RvcmFnZVV0aWwuZ2V0UHJvZHVjdHMoKTtcbiAgICAgICAgbGV0IGh0bWxDYXRhbG9nID0gJyc7XG4gICAgICAgIGxldCBzdW1DYXRhbG9nID0gMDtcbiAgICAgICAgbGV0IENBVEFMT0cgPSBnZXRDYXRhbG9nKCk7XG4gICAgICAgIENBVEFMT0cuZm9yRWFjaCgoeyBpZCwgbmFtZSwgcHJpY2UgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2R1Y3RzU3RvcmUuaW5kZXhPZihpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgaHRtbENhdGFsb2cgKz0gYFxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzaG9wcGluZy1lbGVtZW50X19uYW1lXCI+4pqh77iPICR7bmFtZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic2hvcHBpbmctZWxlbWVudF9fcHJpY2VcIj4ke3ByaWNlLnRvTG9jYWxlU3RyaW5nKCl9IFVTRDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICBzdW1DYXRhbG9nICs9IHByaWNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBodG1sID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNob3BwaW5nLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJzaG9wcGluZ19fY2xvc2VcIiBjbGFzcz1cInNob3BwaW5nX19jbG9zZVwiIG9uY2xpY2s9XCJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICAgICAgICAgICR7aHRtbENhdGFsb2d9XG4gICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInNob3BwaW5nLWVsZW1lbnRfX25hbWVcIj7wn5KlINCh0YPQvNCwINCy0YHRltGFINGC0L7QstCw0YDRltCyOjwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzaG9wcGluZy1lbGVtZW50X19wcmljZVwiPiR7c3VtQ2F0YWxvZy50b0xvY2FsZVN0cmluZygpfSBVU0Q8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBST09UX1NIT1BQSU5HLmlubmVySFRNTCA9IGh0bWw7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3Qgc2hvcHBpbmdQYWdlID0gbmV3IFNob3BwaW5nKCk7XG4iLCJjb25zdCBST09UX0hFQURFUiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXInKTtcbmltcG9ydCB7c2hvcHBpbmdQYWdlfSBmcm9tICcuLi9TaG9wcGluZy9TaG9wcGluZy5qcyc7XG5jbGFzcyBIZWFkZXIge1xuICAgIGhhbmRsZXJPcGVuU2hvcHBpbmdQYWdlKCkge1xuICAgICAgICBzaG9wcGluZ1BhZ2UucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKGNvdW50KSB7XG4gICAgICAgIFJPT1RfSEVBREVSLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBjb25zdCBodG1sID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlci1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwib3Blbl9zaG9wcGluZ1wiIGNsYXNzPVwiaGVhZGVyLWNvdW50ZXJcIiBvbmNsaWNrPVwiXCI+XG4gICAgICAgICAgICAgICAg8J+bkiAke2NvdW50fVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1ib3hcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1pdGVtXCI+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJjaGVja1wiIHZhbHVlPVwiYWxsXCIgaWQ9XCJhbGxcIiBuYW1lPVwiYWxsXCIgY2hlY2tlZD5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJhbGxcIj7QktGB0ZY8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2staXRlbVwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImNoZWNrXCIgdmFsdWU9XCJtXCIgaWQ9XCJtXCIgbmFtZT1cIm1cIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibVwiPtCn0L7Qu9C+0LLRltGH0ZY8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2staXRlbVwiPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiY2hlY2tcIiB2YWx1ZT1cImZcIiBpZD1cImZcIiBuYW1lPVwiZlwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImZcIj7QltGW0L3QvtGH0ZY8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIFJPT1RfSEVBREVSLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGhlYWRlclBhZ2UgPSBuZXcgSGVhZGVyKCk7XG4iLCJjb25zdCBST09UX1BST0RVQ1RTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2R1Y3RzJyk7XG5pbXBvcnQge2xvY2FsU3RvcmFnZVV0aWx9IGZyb20gJy4uLy4uL3V0aWxzL2xvY2FsU3RvcmFnZVV0aWwuanMnO1xuaW1wb3J0IHtnZXRDYXRhbG9nfSBmcm9tICcuLi8uLi9pbmRleC5qcyc7XG5pbXBvcnQge2hlYWRlclBhZ2V9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvSGVhZGVyL0hlYWRlci5qcyc7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZHVjdHMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNsYXNzTmFtZUFjdGl2ZSA9ICdwcm9kdWN0cy1lbGVtZW50X19idG5fYWN0aXZlJztcbiAgICAgICAgdGhpcy5sYWJlbEFkZCA9ICfQlNC+0LHQsNCy0LjRgtC4INCyINC60L7RgNC30LjQvdGDJztcbiAgICAgICAgdGhpcy5sYWJlbFJlbW92ZSA9ICfQktC40LTQsNC70LjRgtC4INC3INC60L7RgNC30LjQvdC4JztcbiAgICB9XG4gICAgaGFuZGxlclNldExvY2F0U3RvcmFnZShlbGVtZW50LCBpZCkge1xuICAgICAgICBjb25zdCB7IHB1c2hQcm9kdWN0LCBwcm9kdWN0cyB9ID0gbG9jYWxTdG9yYWdlVXRpbC5wdXRQcm9kdWN0cyhpZCk7XG5cbiAgICAgICAgaWYgKHB1c2hQcm9kdWN0KSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc05hbWVBY3RpdmUpO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lclRleHQgPSB0aGlzLmxhYmVsUmVtb3ZlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2xhc3NOYW1lQWN0aXZlKTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5sYWJlbEFkZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGhlYWRlclBhZ2UucmVuZGVyKHByb2R1Y3RzLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgQ0FUQUxPRyA9IGdldENhdGFsb2coKTtcbiAgICAgICAgY29uc3QgcHJvZHVjdHNTdG9yZSA9IGxvY2FsU3RvcmFnZVV0aWwuZ2V0UHJvZHVjdHMoKTtcbiAgICAgICAgbGV0IGh0bWxDYXRhbG9nID0gJyc7XG5cbiAgICAgICAgQ0FUQUxPRy5mb3JFYWNoKCh7IGlkLCBuYW1lLCBwcmljZSwgaW1nIH0pID0+IHtcbiAgICAgICAgICAgIGxldCBhY3RpdmVDbGFzcyA9ICcnO1xuICAgICAgICAgICAgbGV0IGFjdGl2ZVRleHQgPSAnJztcbiAgICAgICAgICAgIGlmIChwcm9kdWN0c1N0b3JlLmluZGV4T2YoaWQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVRleHQgPSB0aGlzLmxhYmVsQWRkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVDbGFzcyA9ICcgJyArIHRoaXMuY2xhc3NOYW1lQWN0aXZlO1xuICAgICAgICAgICAgICAgIGFjdGl2ZVRleHQgPSB0aGlzLmxhYmVsUmVtb3ZlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGh0bWxDYXRhbG9nICs9IGBcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwicHJvZHVjdHMtZWxlbWVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19uYW1lXCI+JHtuYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19pbWdcIiBzcmM9XCIke2ltZ31cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19wcmljZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKaoe+4jyAke3ByaWNlLnRvTG9jYWxlU3RyaW5nKCl9IFVTRFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB2YWx1ZT1cIiR7aWR9XCIgaWQ9XCJhZGRfcHJvZFwiIGNsYXNzPVwicHJvZHVjdHMtZWxlbWVudF9fYnRuJHthY3RpdmVDbGFzc31cIiBvbmNsaWNrPVwiXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHthY3RpdmVUZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHZhbHVlPVwiJHtpZH1cIiBpZD1cInNob3dfZGVzXCIgY2xhc3M9XCJkZXNjcmlwdGlvbi1lbGVtZW50X19idG5cIiBvbmNsaWNrPVwiXCI+INCe0L/QuNGBIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgICAgICAgICA8dWwgY2xhc3M9XCJwcm9kdWN0cy1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAke2h0bWxDYXRhbG9nfVxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgYDtcblxuICAgICAgICBST09UX1BST0RVQ1RTLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrJykuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gb3JkZXJGdW5jdGlvbjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIG9yZGVyRnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsZXQgbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGVja1t2YWx1ZT1cIm1cIl0nKTtcbiAgICAgICAgICAgIGxldCBmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoZWNrW3ZhbHVlPVwiZlwiXScpO1xuICAgICAgICAgICAgbGV0IGh0bWxDYXRhbG9nID0gJyc7XG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0c1N0b3JlID0gbG9jYWxTdG9yYWdlVXRpbC5nZXRQcm9kdWN0cygpO1xuICAgICAgICAgICAgaWYgKG0uY2hlY2tlZCAmJiAhZi5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgaHRtbENhdGFsb2cgPSAnJztcbiAgICAgICAgICAgICAgICBDQVRBTE9HLmZvckVhY2goKHsgaWQsIG5hbWUsIHByaWNlLCBpbWcsIGdlbmRlciB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVDbGFzcyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlVGV4dCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdHNTdG9yZS5pbmRleE9mKGlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRleHQgPSB0aGlzLmxhYmVsQWRkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3MgPSAnICcgKyB0aGlzLmNsYXNzTmFtZUFjdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRleHQgPSB0aGlzLmxhYmVsUmVtb3ZlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYoZ2VuZGVyID09PSAnbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxDYXRhbG9nICs9IGBcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwicHJvZHVjdHMtZWxlbWVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19uYW1lXCI+JHtuYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19pbWdcIiBzcmM9XCIke2ltZ31cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19wcmljZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKaoe+4jyAke3ByaWNlLnRvTG9jYWxlU3RyaW5nKCl9IFVTRFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB2YWx1ZT1cIiR7aWR9XCIgaWQ9XCJhZGRfcHJvZFwiIGNsYXNzPVwicHJvZHVjdHMtZWxlbWVudF9fYnRuJHthY3RpdmVDbGFzc31cIiBvbmNsaWNrPVwiXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAg0JTQvtC00LDRgtC4L9CS0LjQtNCw0LvQuNGC0LhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB2YWx1ZT1cIiR7aWR9XCIgaWQ9XCJzaG93X2Rlc1wiIGNsYXNzPVwiZGVzY3JpcHRpb24tZWxlbWVudF9fYnRuXCIgb25jbGljaz1cIlwiPiDQntC/0LjRgSA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICBgOyBcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICB9KTsgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChmLmNoZWNrZWQgJiYgIW0uY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGh0bWxDYXRhbG9nID0gJyc7XG4gICAgICAgICAgICAgICAgQ0FUQUxPRy5mb3JFYWNoKCh7IGlkLCBuYW1lLCBwcmljZSwgaW1nLCBnZW5kZXIgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlQ2xhc3MgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZVRleHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RzU3RvcmUuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVUZXh0ID0gdGhpcy5sYWJlbEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzID0gJyAnICsgdGhpcy5jbGFzc05hbWVBY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FjdGl2ZVRleHQgPSB0aGlzLmxhYmVsUmVtb3ZlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoZ2VuZGVyID09PSAnZicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxDYXRhbG9nICs9IGBcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHMtZWxlbWVudF9fbmFtZVwiPiR7bmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19pbWdcIiBzcmM9XCIke2ltZ31cIiAvPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RzLWVsZW1lbnRfX3ByaWNlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICDimqHvuI8gJHtwcmljZS50b0xvY2FsZVN0cmluZygpfSBVU0RcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHZhbHVlPVwiJHtpZH1cIiBpZD1cImFkZF9wcm9kXCIgY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19idG4ke2FjdGl2ZUNsYXNzfVwiIG9uY2xpY2s9XCJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgINCU0L7QtNCw0YLQuC/QktC40LTQsNC70LjRgtC4XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHZhbHVlPVwiJHtpZH1cIiBpZD1cInNob3dfZGVzXCIgY2xhc3M9XCJkZXNjcmlwdGlvbi1lbGVtZW50X19idG5cIiBvbmNsaWNrPVwiXCI+INCe0L/QuNGBIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICBgOyBcblxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICAgIH0gICBlbHNlIHtcbiAgICAgICAgICAgICAgICBodG1sQ2F0YWxvZyA9ICcnO1xuICAgICAgICAgICAgICAgIENBVEFMT0cuZm9yRWFjaCgoeyBpZCwgbmFtZSwgcHJpY2UsIGltZyB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVDbGFzcyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlVGV4dCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdHNTdG9yZS5pbmRleE9mKGlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRleHQgPSB0aGlzLmxhYmVsQWRkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3MgPSAnICcgKyB0aGlzLmNsYXNzTmFtZUFjdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWN0aXZlVGV4dCA9IHRoaXMubGFiZWxSZW1vdmU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaHRtbENhdGFsb2cgKz0gYFxuICAgICAgICAgICAgPGxpIGNsYXNzPVwicHJvZHVjdHMtZWxlbWVudFwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHMtZWxlbWVudF9fbmFtZVwiPiR7bmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cInByb2R1Y3RzLWVsZW1lbnRfX2ltZ1wiIHNyYz1cIiR7aW1nfVwiIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0cy1lbGVtZW50X19wcmljZVwiPlxuICAgICAgICAgICAgICAgICAgICDimqHvuI8gJHtwcmljZS50b0xvY2FsZVN0cmluZygpfSBVU0RcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2R1Y3RzLWVsZW1lbnRfX2J0biR7YWN0aXZlQ2xhc3N9XCIgb25jbGljaz1cIlwiPlxuICAgICAgICAgICAgICAgICAgICDQlNC+0LTQsNGC0Lgv0JLQuNC00LDQu9C40YLQuFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdmFsdWU9XCIke2lkfVwiIGlkPVwic2hvd19kZXNcIiBjbGFzcz1cImRlc2NyaXB0aW9uLWVsZW1lbnRfX2J0blwiIG9uY2xpY2s9XCJcIj4g0J7Qv9C40YEgPC9idXR0b24+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICBgOyBcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgICAgIDx1bCBjbGFzcz1cInByb2R1Y3RzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgJHtodG1sQ2F0YWxvZ31cbiAgICAgICAgPC91bD5cbiAgICAgICAgYDtcbiAgICAgICAgICAgIFJPT1RfUFJPRFVDVFMuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICB9XG59XG5cblxuZXhwb3J0IGNvbnN0IHByb2R1Y3RzUGFnZSA9IG5ldyBQcm9kdWN0cygpO1xuIiwiY29uc3QgUk9PVF9GT09URVIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9vdGVyJyk7XG5jbGFzcyBGb290ZXIge1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBodG1sID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3Rlcl9fcm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyX190ZXh0XCI+8J+TnjogKzM5MDU2MDIzMDEyMCAsXG4gICAgICAgICAgICBTdGF5IEhvbWUg8J+PoFxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBST09UX0ZPT1RFUi5pbm5lckhUTUwgPSBodG1sO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGZvb3RlckRvd24gPSBuZXcgRm9vdGVyKCk7XG4iLCJjb25zdCBST09UX01FTlUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpO1xuY2xhc3MgTWVudSB7XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkd3MtbWVudVwiPlxuICAgICAgICAgPHVsPlxuICAgICAgICAgICA8bGkgcm91dGU9XCIvd2F0Y2hTaG9wL2luZGV4XCI+PGEgaHJlZj1cImluZGV4XCI+PGk+PC9pPtCT0L7Qu9C+0LLQvdCwPC9hPjwvbGk+XG4gICAgICAgICAgIDxsaSByb3V0ZT1cIi93YXRjaFNob3Avc2hhcmVcIj48YSBocmVmPVwic2hhcmVcIj48aT48L2k+0JDQutGG0ZbRlzwvYT48L2xpPlxuICAgICAgICAgICA8bGkgcm91dGU9XCIvd2F0Y2hTaG9wL2NhcnRcIj48YSBocmVmPVwiY2FydFwiPjxpPjwvaT7QmtC+0YDQt9C40L3QsDwvYT48L2xpPlxuICAgICAgICAgICA8bGkgcm91dGU9XCIvd2F0Y2hTaG9wL29yZGVyXCI+PGEgaHJlZj1cIm9yZGVyXCI+PGk+PC9pPtCX0YDQvtCx0LjRgtC4INC30LDQvNC+0LLQu9C10L3QvdGPPC9hPjwvbGk+XG4gICAgICAgICA8L3VsPiBcbiAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIFJPT1RfTUVOVS5pbm5lckhUTUwgPSBodG1sO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IG5hdmlnYXRpb25NZW51ID0gbmV3IE1lbnUoKTtcbiIsImNvbnN0IFJPT1RfU0xJREVSID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NsaWRlcicpO1xuXG5jbGFzcyBTbGlkZXIge1xuXG4gICAgcmVuZGVyKCkge1xuXG5cbiAgICAgICAgY29uc3QgaHRtbCA9IGBcbiAgICAgIDxkaXYgaWQ9XCJyb3dcIj5cblx0XHRcdDxpbWcgc3JjPVwiaW1nLzEuanBnXCIgYWx0ID1cIlwiPlxuXHRcdFx0PGltZyBzcmM9XCJpbWcvMi5qcGdcIiBhbHQgPVwiXCI+XG5cdFx0XHQ8aW1nIHNyYz1cImltZy8zLmpwZ1wiIGFsdCA9XCJcIj5cblx0XHRcdDxpbWcgc3JjPVwiaW1nLzQuanBnXCIgYWx0ID1cIlwiPlxuXHRcdFx0PGltZyBzcmM9XCJpbWcvNS5qcGdcIiBhbHQgPVwiXCI+XG4gICAgICA8aW1nIHNyYz1cImltZy82LmpwZ1wiIGFsdCA9XCJcIj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICBgO1xuICAgICAgICBhdXRvU2xpZGVyKCk7XG4gICAgICAgIHZhciBsZWZ0ID0gMDtcbiAgICAgICAgdmFyIHRpbWVyO1xuXG4gXG4gICAgICAgIGZ1bmN0aW9uIGF1dG9TbGlkZXIgKCkge1xuICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JvdycpO1xuICAgICAgICAgICAgICAgIGxlZnQgPSBsZWZ0IC0gMTI4O1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0IDwgLTUxMikge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBhdXRvU2xpZGVyICgpO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBST09UX1NMSURFUi5pbm5lckhUTUwgPSBodG1sO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGF1dG9TbGlkZXIgPSBuZXcgU2xpZGVyKCk7IiwiY2xhc3MgRXJyb3Ige1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgaHRtbCA9IGBcbiAgICAgICAgXHQ8ZGl2IGNsYXNzPVwiZXJyb3ItY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVycm9yLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzPtCo0L7RgdGMINC/0ZbRiNC70L4g0L3QtSDRgtCw0Lo8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8cD7Qn9C+0YXQvtC00YMg0L3QtSDRgtCwINGB0YHQuNC70LrQsCDQsNCx0L4g0LfQvdC+0LIg0LfQsNCx0YPQsiDQt9Cw0L/Rg9GB0YLQuNGC0Lgg0YHQtdGA0LLQtdGAPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBcdDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIFJPT1RfRVJST1IuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBlcnJvclBhZ2UgPSBuZXcgRXJyb3IoKTtcbiIsImNvbnN0IFJPT1RfREVTQ1JJUFRJT04gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24nKTtcbmltcG9ydCB7Z2V0Q2F0YWxvZ30gZnJvbSAnLi4vLi4vaW5kZXguanMnO1xuZXhwb3J0IGNvbnN0IGdldFJPT1RfREVTQ1JJUFRJT04gPSAoKSA9PiB7XG4gICAgcmV0dXJuIFJPT1RfREVTQ1JJUFRJT047XG59O1xuXG5jbGFzcyBEZXNjcmlwdGlvbiB7XG4gICAgXG5cblxuICAgIGhhbmRsZXJDbGVhcigpIHtcbiAgICAgICAgUk9PVF9ERVNDUklQVElPTi5pbm5lckhUTUwgPSAnJztcbiAgICB9XG5cbiAgICBoYW5kbGVyT3BlbkRlc2NyaXB0aW9uUGFnZShlbCwgaWQpIHtcbiAgICAgICAgZGVzY3JpcHRpb25QYWdlLnJlbmRlcihpZCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKGlkKSB7XG4gICAgICAgIGxldCBDQVRBTE9HID0gZ2V0Q2F0YWxvZygpO1xuICAgICAgICBsZXQgaHRtbENhdGFsb2cgPSAnJztcbiAgICAgICAgbGV0IGluZGV4ID0gaWQ7XG5cbiAgICAgICAgQ0FUQUxPRy5mb3JFYWNoKCh7IGlkLCBuYW1lLCBwcmljZSwgaW1nLCBkZXNjcmlwdGlvbiwgZ2VuZGVyIH0pID0+IHtcblxuICAgICAgICAgICAgaWYgKGlkID09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaHRtbENhdGFsb2cgKz0gYFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGVzY3JpcHRpb24tZWxlbWVudF9fbmFtZVwiPiR7bmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cImRlc2NyaXB0aW9uLWVsZW1lbnRfX2ltZ1wiIHNyYz1cIiR7aW1nfVwiIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXNjcmlwdGlvbi1lbGVtZW50X19wcmljZVwiPlxuICAgICAgICAgICAgICAgICAgICDimqHvuI8gJHtwcmljZS50b0xvY2FsZVN0cmluZygpfSBVU0RcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJkZXNjcmlwdGlvbi1lbGVtZW50X190ZXh0XCI+JHtkZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJkZXNjcmlwdGlvbi1lbGVtZW50X19nZW5kZXJcIj7QodGC0LDRgtGMOiAke2dlbmRlcn08L3A+XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaHRtbCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjcmlwdGlvbi1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZGVzY3JpcHRpb25fX2Nsb3NlXCIgY2xhc3M9XCJkZXNjcmlwdGlvbl9fY2xvc2VcIiBvbmNsaWNrPVwiXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPHRhYmxlPlxuICAgICAgICAgICAgICAgICAgICAke2h0bWxDYXRhbG9nfVxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBST09UX0RFU0NSSVBUSU9OLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgIFxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGRlc2NyaXB0aW9uUGFnZSA9IG5ldyBEZXNjcmlwdGlvbigpO1xuIiwiaW1wb3J0IHtzcGlubmVyUGFnZX0gZnJvbSAnLi9jb21wb25lbnRzL1NwaW5uZXIvU3Bpbm5lci5qcyc7XG5pbXBvcnQge2hlYWRlclBhZ2V9IGZyb20gJy4vY29tcG9uZW50cy9IZWFkZXIvSGVhZGVyLmpzJztcbmltcG9ydCB7cHJvZHVjdHNQYWdlfSBmcm9tICcuL2NvbXBvbmVudHMvUHJvZHVjdHMvUHJvZHVjdHMuanMnO1xuaW1wb3J0IHtmb290ZXJEb3dufSBmcm9tICcuL2NvbXBvbmVudHMvRm9vdGVyL0Zvb3Rlci5qcyc7XG5pbXBvcnQge25hdmlnYXRpb25NZW51fSBmcm9tICcuL2NvbXBvbmVudHMvTWVudS9NZW51LmpzJztcbmltcG9ydCB7YXV0b1NsaWRlcn0gZnJvbSAnLi9jb21wb25lbnRzL1NsaWRlci9TbGlkZXIuanMnO1xuaW1wb3J0IHtlcnJvclBhZ2V9IGZyb20gJy4vY29tcG9uZW50cy9FcnJvci9FcnJvci5qcyc7XG5pbXBvcnQge2xvY2FsU3RvcmFnZVV0aWx9IGZyb20gJy4vdXRpbHMvbG9jYWxTdG9yYWdlVXRpbC5qcyc7XG5pbXBvcnQge2Rlc2NyaXB0aW9uUGFnZSwgZ2V0Uk9PVF9ERVNDUklQVElPTn0gZnJvbSAnLi9jb21wb25lbnRzL0Rlc2NyaXB0aW9uL0Rlc2NyaXB0aW9uLmpzJztcbi8vaW1wb3J0IHtnZXRST09UX0RFU0NSSVBUSU9OfSBmcm9tICcuL2NvbXBvbmVudHMvRGVzY3JpcHRpb24vRGVzY3JpcHRpb24uanMnO1xuaW1wb3J0IHtzaG9wcGluZ1BhZ2V9IGZyb20gJy4vY29tcG9uZW50cy9TaG9wcGluZy9TaG9wcGluZy5qcyc7XG5pbXBvcnQge3JvdXR9IGZyb20gJy4vcm91dGVyLmpzJztcblxuXG5cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJvdXQoKTtcbiAgICBsZXQgcHJvZHVjdHNTdG9yZSA9IGxvY2FsU3RvcmFnZVV0aWwuZ2V0UHJvZHVjdHMoKTtcbiAgICBoZWFkZXJQYWdlLnJlbmRlcihwcm9kdWN0c1N0b3JlLmxlbmd0aCk7XG4gICAgcHJvZHVjdHNQYWdlLnJlbmRlcigpO1xuICAgIGZvb3RlckRvd24ucmVuZGVyKCk7XHRcbiAgICBuYXZpZ2F0aW9uTWVudS5yZW5kZXIoKTtcbiAgICBhdXRvU2xpZGVyLnJlbmRlcigpO1xufVxuXG5zcGlubmVyUGFnZS5yZW5kZXIoKTtcblxuXG5cbmxldCBDQVRBTE9HID0gW107XG5cbmZldGNoKCdzZXJ2ZXIvZGIuanNvbicpXG4gICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLnRoZW4oYm9keSA9PiB7XG4gICAgICAgIENBVEFMT0cgPSBib2R5O1xuXHRcdFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNwaW5uZXJQYWdlLmhhbmRsZUNsZWFyKCk7XG4gICAgICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICBzcGlubmVyUGFnZS5oYW5kbGVDbGVhcigpO1xuICAgICAgICBlcnJvclBhZ2UucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICBleHBvcnQgY29uc3QgZ2V0Q2F0YWxvZyA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIENBVEFMT0c7XG4gICAgfTtcblx0XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Blbl9zaG9wcGluZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGhlYWRlclBhZ2UuaGFuZGxlck9wZW5TaG9wcGluZ1BhZ2UoKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3BwaW5nX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzaG9wcGluZ1BhZ2UuaGFuZGxlckNsZWFyKCk7XG5cdFx0XHRcbiAgICAgICAgfSk7XG4gICAgfSk7XHRcbiAgICBsZXQgQ0FUQUxPRyA9IGdldENhdGFsb2coKTtcbiAgICBDQVRBTE9HLmZvckVhY2goKHsgaWQgfSkgPT4ge1xuICAgICAgICBpZiAoaWQgPT09IGV2dC50YXJnZXQudmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmlkID09PSAnYWRkX3Byb2QnKSB7XG4gICAgICAgICAgICAgICAgcHJvZHVjdHNQYWdlLmhhbmRsZXJTZXRMb2NhdFN0b3JhZ2UodGhpcywgaWQpO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKGV2dC50YXJnZXQuaWQgPT09ICdzaG93X2RlcycpIHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblBhZ2UuaGFuZGxlck9wZW5EZXNjcmlwdGlvblBhZ2UodGhpcywgaWQpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbl9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBnZXRST09UX0RFU0NSSVBUSU9OKCkuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgfSk7XHRcdFx0XHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cblxuXG5cblx0XG5cdFxuXHRcbi8qXG5cdGVsc2UgaWYgKGV2dC50YXJnZXQuaWQgPT09ICdzaG93X2RlcycpIHtcblx0XHRkZXNjcmlwdGlvblBhZ2UuaGFuZGxlck9wZW5EZXNjcmlwdGlvblBhZ2UodGhpcywgaWQpXG5cdH0gZWxzZSBpZiAoZXZ0LnRhcmdldC5pZCA9PT0gJ2Nsb3NlX2RlcycpIHtcblx0XHRkZXNjcmlwdGlvblBhZ2UuaGFuZGxlckNsZWFyKCk7XG5cdH0gZWxzZSBpZiAoZXZ0LnRhcmdldC5pZCA9PT0gJ29wZW5fc2hvcHBpbmcnKSB7XG5cdFx0aGVhZGVyUGFnZS5oYW5kbGVyT3BlblNob3BwaW5nUGFnZSgpO1xuXHR9IGVsc2UgaWYgKGV2dC50YXJnZXQuaWQgPT09ICdjbG9zZV9zaG9wcGluZycpIHtcblx0XHRzaG9wcGluZ1BhZ2UuaGFuZGxlckNsZWFyKCk7XG5cdH1cblx0fX0pXG5cdCovXG4iLCJleHBvcnQgY29uc3Qgcm91dCA9IGZ1bmN0aW9uKCkge1xuXHRjb25zb2xlLmxvZygnRE9NIGhhcyBsb2FkZWQnKTtcblxuXHR2YXIgYWN0aXZlUm91dGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbcm91dGVdJykpXG5cdC8vY29uc29sZS5sb2coYWN0aXZlUm91dGVzKTtcblx0dmFyIFJvdXRlciA9IGZ1bmN0aW9uKG5hbWUsIHJvdXRlcykge1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0cm91dGVzOiByb3V0ZXNcblx0XHR9XG5cdH07XG5cblxuXG5cdHZhciBteUZpcnN0Um91dGVyID0gbmV3IFJvdXRlcignbXlGaXJzdFJvdXRlcicsIFtcblx0XHR7XG5cdFx0XHRwYXRoOiAnL2luZGV4Jyxcblx0XHRcdG5hbWU6ICdNYWluJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cGF0aDogJy9jYXJ0Jyxcblx0XHRcdG5hbWU6ICdDQVJUJ1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cGF0aDogJy9zaGFyZScsXG5cdFx0XHRuYW1lOiAnU0hBUkUnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRwYXRoOiAnL29yZGVyJyxcblx0XHRcdG5hbWU6ICdPUkRFUidcblx0XHR9LFxuXHRdKVxuXHR2YXIgY3VycmVudFBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cdGlmKChjdXJyZW50UGF0aCA9PT0gJycpIHx8IChjdXJyZW50UGF0aCA9PT0gJy9pbmRleCcpKSB7XG5cdFx0Y29uc29sZS5sb2coJ1lvdSBhcmUgb24gdGhlIE1haW4gcGFnZScpXG5cdH0gZWxzZSB7XG5cdFx0dmFyIHJvdXRlID0gbXlGaXJzdFJvdXRlci5yb3V0ZXMuZmlsdGVyKGZ1bmN0aW9uKHIpIHtcblx0XHRcdHJldHVybiByLnBhdGggPT09IGN1cnJlbnRQYXRoXG5cdFx0fSlbMF07XG5cdFx0aWYgKHJvdXRlLm5hbWUpIHtcblx0XHRjb25zb2xlLmxvZygnWW91IGFyZSBvbiB0aGUgJyArIHJvdXRlLm5hbWUgKyAnIHBhdGgnKTtcblx0XHR9XG5cdH1cbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbl9fd2VicGFja19yZXF1aXJlX18oMjczKTtcbi8vIFRoaXMgZW50cnkgbW9kdWxlIHVzZWQgJ2V4cG9ydHMnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbiJdLCJzb3VyY2VSb290IjoiIn0=